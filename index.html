<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trivia Challenge</title>
    <style>
      body {
        font-family: 'Arial', sans-serif;
        background-color: #f4f4f4;
        color: #333;
        text-align: center;
        margin: 0;
        padding: 20px;
      }

      h1 {
        font-size: 2em;
        margin-bottom: 30px;
        color: #333;
      }

      #question {
        font-size: 1.5em;
        margin: 20px 0;
        color: #555;
      }

      #answer {
        font-size: 1.2em;
        color: #333;
      }

      button {
        padding: 15px 30px;
        font-size: 1em;
        cursor: pointer;
        border: 2px solid #333;
        background-color: #ddd;
        color: #333;
        transition: background-color 0.3s, color 0.3s;
        margin-top: 10px;
      }

      button:hover {
        background-color: #ccc;
        color: #000;
      }

      .answer-option {
        cursor: pointer;
        margin: 5px 0;
        display: inline-block;
        padding: 10px;
        border: 1px solid #ccc;
        background-color: #eee;
        transition: background-color 0.3s, color 0.3s;
      }

      .answer-option:hover {
        background-color: #ddd;
      }

      .feedback {
        font-size: 1.2em;
        margin-top: 20px;
        color: #d9534f;
      }

      #health-bar {
        margin-top: 20px;
        font-size: 1.2em;
      }

      #score {
        margin-top: 20px;
        font-size: 1.2em;
      }

      #menu {
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <h1>Trivia Challenge</h1>
    <div id="menu">
      <button onclick="startGame()">Start Game</button>
    </div>
    <div id="question">Welcome to the trivia game. Click start to begin.</div>
    <div id="answer"></div>
    <div id="feedback" class="feedback"></div>
    <div id="health-bar">Health: <span id="health">100</span></div>
    <div id="score">Score: <span id="score-value">0</span></div>
  
    <script>
      let correctAnswer = '';
      let questionData = null;
      let score = 0;
      let health = 100;
  
      function startGame() {
        document.getElementById('menu').style.display = 'none';
        fetchTrivia();
      }
  
      async function fetchTrivia() {
        try {
          const response = await fetch('https://opentdb.com/api.php?amount=1&type=multiple');
          const data = await response.json();
  
          if (data.results.length > 0) {
            questionData = data.results[0];
            const question = questionData.question;
            correctAnswer = questionData.correct_answer;
            const incorrectAnswers = questionData.incorrect_answers;
            const allAnswers = [correctAnswer, ...incorrectAnswers].sort(() => Math.random() - 0.5);
  
            document.getElementById('question').innerHTML = question;
            document.getElementById('answer').innerHTML = '';
            document.getElementById('feedback').innerHTML = '';
  
            allAnswers.forEach((answer, index) => {
              const answerElement = document.createElement('div');
              answerElement.className = 'answer-option';
              answerElement.innerHTML = `${String.fromCharCode(65 + index)}. ${answer}`;
              answerElement.onclick = () => checkAnswer(answer);
              document.getElementById('answer').appendChild(answerElement);
            });
          }
        } catch (error) {
          console.error('Error fetching trivia:', error);
        }
      }
  
      function checkAnswer(selectedAnswer) {
        const feedbackElement = document.getElementById('feedback');
        if (selectedAnswer === correctAnswer) {
          feedbackElement.textContent = "You're correct!";
          feedbackElement.style.color = '#5bc0de'; // Blue for correct
          score++;
        } else {
          feedbackElement.textContent = `You're incorrect! The correct answer was: ${correctAnswer}`;
          feedbackElement.style.color = '#d9534f'; // Red for incorrect
          health -= 5;
          if (health <= 0) {
            endGame();
            return;
          }
        }
  
        updateScoreAndHealth();
        setTimeout(() => {
          fetchTrivia(); // Automatically fetch the next question
        }, 2000); // 2-second delay before showing the next question
      }
  
      function updateScoreAndHealth() {
        document.getElementById('score-value').textContent = score;
        document.getElementById('health').textContent = health;
      }
  
      function endGame() {
        document.getElementById('feedback').textContent = `Game Over! Your final score is ${score}.`;
        document.getElementById('feedback').style.color = '#d9534f'; // Red for game over
        document.getElementById('question').innerHTML = '';
        document.getElementById('answer').innerHTML = '';
        document.getElementById('menu').style.display = 'block';
        document.getElementById('menu').innerHTML += `<button onclick="shareScore()">Share Score</button>`;
      }
  
      function shareScore() {
        const score = document.getElementById('score-value').textContent;
        const shareText = `I scored ${score} points in the Trivia Challenge! Can you beat my score?`;
        const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}`;
        window.open(url, '_blank');
      }
    </script>
  </body>
</html>